<div class="text-center page-title">Выберите доступные валюты и очередность их отображения</div>

<div class="table" *ngIf="!loading; else loadingIndicator">
  <div class="row header">
    <div class="col-sm-2 text-center first-column">Символ</div>
    <div class="col-sm-2 text-center">Название</div>
    <div class="col-sm-2 text-center">Используется</div>
    <div class="col-sm-3 text-center forth-column">По умолчанию</div>
    <div class="col-sm-3">Действия</div>
  </div>

  <div class="row" *ngFor="let defaultCurrency of allCurrencies | currencySort; let lastCurrency = last; let firstCurrency = first;">
    <div class="col-sm-2 text-center"><span [innerHTML]="defaultCurrency.symbol"></span></div>
    <div class="col-sm-2 text-center">{{defaultCurrency.name}}</div>
    <div class="col-sm-2 text-center"><span *ngIf="isCurrencyUsed(defaultCurrency.name)" class="glyphicon glyphicon-ok green-mark"></span></div>
    <div class="col-sm-3 text-center"><span *ngIf="isCurrencyDefault(defaultCurrency.name)" class="glyphicon glyphicon-star red-mark"></span></div>
    <div class="col-sm-3">
      <span class="action glyphicon glyphicon-remove" *ngIf="isCurrencyUsed(defaultCurrency.name)"
            popover="Не использовать" popoverPlacement="left"
            [popoverOnHover]="true" [popoverCloseOnMouseOutside]="true" (click)="unUseCurrencyForProfile(defaultCurrency.name)">
      </span>
      <span class="action glyphicon glyphicon-ok" *ngIf="!isCurrencyUsed(defaultCurrency.name)"
            popover="Использовать" popoverPlacement="left"
            [popoverOnHover]="true" [popoverCloseOnMouseOutside]="true" (click)="useCurrencyForProfile(defaultCurrency.name)">
      </span>
      <span class="action glyphicon glyphicon-star" *ngIf="!isCurrencyDefault(defaultCurrency.name) && isCurrencyUsed(defaultCurrency.name)"
            popover="По умолчанию" popoverPlacement="left"
            [popoverOnHover]="true" [popoverCloseOnMouseOutside]="true" (click)="markCurrencyAsDefault(defaultCurrency.name)">
      </span>
      <span class="empty-action" *ngIf="isCurrencyDefault(defaultCurrency.name)">&nbsp;</span>
      <span class="action glyphicon glyphicon-arrow-down" *ngIf="isCurrencyUsed(defaultCurrency.name) && !lastCurrency && isMoveAvailable()"
            popover="Сдвинуть вниз" popoverPlacement="left"
            [popoverOnHover]="true" [popoverCloseOnMouseOutside]="true" (click)="moveCurrencyDown(defaultCurrency.name)">
      </span>
      <span class="action glyphicon glyphicon-arrow-up" *ngIf="isCurrencyUsed(defaultCurrency.name) && !firstCurrency && isMoveAvailable()"
            popover="Сдвинуть вверх" popoverPlacement="left"
            [popoverOnHover]="true" [popoverCloseOnMouseOutside]="true" (click)="moveCurrencyUp(defaultCurrency.name)">
      </span>
    </div>
    <hr/>
  </div>
</div>

<ng-template #loadingIndicator>
  <bk-spinner [size]="80"></bk-spinner>
</ng-template>
